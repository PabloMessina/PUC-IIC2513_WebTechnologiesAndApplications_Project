<!--
  parameters: product, grocery
 --> 

<div class="product-container clearfix">

  <h1><%= product.name %></h1>
  by <%= link_to grocery.name, grocery_path(grocery) %>
  <br/>
  <br/>

  <div class="image-and-rating">

    <% if product.has_image? %>
      <%= image_tag product.product_image.product_image_url %>
    <% else %>
      <%= image_tag "products-icon-basket.gif" %>
    <% end %>
    <br/>

    <span class="stars-container">
      <span class="stars-row back">
         <label>★</label><label>★</label><label>★</label><label>★</label><label>★</label>
      </span>
      <span class="stars-row front" style="width: <%= product.star_count.get_rating_percentage_average %>%">
         <label>★</label><label>★</label><label>★</label><label>★</label><label>★</label>
      </span>
    </span>
    (<%= product.stars.count %>)
    <br/>

    <%= product.star_count.get_rating_average.round(1) %> out of  5 stars
    <br/>

    <%= link_to "see all reviews (#{product.reviews.count})", product_reviews_path(product) %>

  </div>


  <div class="extra-info">
    Price: $ <%= product.price %> <br/>
    IN STOCK: <%= product.inventory.stock %> <br/>
    <p>
      <strong>Category:</strong>
      <%= @product.category ? @product.category.name : "none" %>
    </p>
    <p>
      <strong>Tags:</strong>
      <%= @product.tags.any? ? @product.tags.map{|x| x.name}.join(', ') : 'none'%>
    </p>
  </div>

</div>